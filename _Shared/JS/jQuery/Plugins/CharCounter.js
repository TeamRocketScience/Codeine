(function($){$.fn.charCounter=function(parameters){return this.each(function(index){var prms=$.extend(false,$.charCounter.defaults,parameters);var curr_char=0;var maxl=$(this).attr("maxlength");if(maxl>0)prms.limit=maxl;if(typeof parameters!="object"||typeof parameters=="object"&&!parameters.counter_block)prms.counter_block=$(this).attr("id")+"-counter-block";if(typeof parameters=="object"&&parameters.curr_class)prms.curr_style="";if(typeof parameters=="object"&&parameters.limit_class)prms.limit_style= "";this.createBlock=function(){counter_div=$("#"+prms.counter_block);if(counter_div.length==0)$(this).after("<span id='"+prms.counter_block+"' class='"+prms.slash_class+"'>/</span>");else{if(counter_div.text()=="")counter_div.text("/");if(counter_div.is(":hidden"))counter_div.show()}if($("#"+prms.counter_block+" ."+prms.curr_class).length==0)$("#"+prms.counter_block).prepend("<span class='"+prms.curr_class+"' "+prms.curr_style+"></span>");if($("#"+prms.counter_block+" ."+prms.limit_class).length== 0)$("#"+prms.counter_block).append("<span class='"+prms.limit_class+"' "+prms.limit_style+"></span>");this.count()};this.count=function(){curr_char=$(this).val().length;$("#"+prms.counter_block+" span."+prms.curr_class).text(curr_char);$("#"+prms.counter_block+" span."+prms.limit_class).text(prms.limit-curr_char)};this.hideCounter=function(){$("#"+prms.counter_block).hide()};$(this).focus(function(){this.createBlock()});$(this).keyup(function(){this.count()});$(this).blur(function(){this.hideCounter()})})}; $.charCounter={};$.charCounter.defaults={limit:255,counter_block:"",curr_class:"char-qty",limit_class:"max-qty",curr_style:"style='color:#666;'",limit_style:"style='color:#900;'",slash_class:""}})(jQuery);